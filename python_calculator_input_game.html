<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® Python ì—°ì‚°ì & Input ê²Œì„ - ë§ˆë²• ìƒì </title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Press Start 2P', cursive;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
            overflow: hidden;
        }
        
        .game-container {
            max-width: 1800px;
            width: 100%;
            height: calc(100vh - 30px);
            background: #0f0f1e;
            border: 4px solid #ffd700;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        .game-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #ffd700;
            flex-shrink: 0;
        }
        
        .game-title {
            font-size: 24px;
            color: #ffd700;
            margin-bottom: 8px;
            text-shadow: 2px 2px 0px #ff4444;
            animation: titleGlow 2s ease-in-out infinite;
        }
        
        @keyframes titleGlow {
            0%, 100% { text-shadow: 2px 2px 0px #ff4444, 0 0 10px #ffd700; }
            50% { text-shadow: 2px 2px 0px #ff4444, 0 0 20px #ffd700; }
        }
        
        .subtitle {
            font-size: 13px;
            color: #88ccff;
            margin-top: 5px;
        }
        
        .game-main {
            display: flex;
            gap: 20px;
            flex: 1;
            overflow: hidden;
        }
        
        .game-screen {
            background: #1a1a2e;
            border: 3px solid #444;
            border-radius: 8px;
            padding: 25px;
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            position: relative;
        }
        
        .game-sidebar {
            width: 350px;
            display: flex;
            flex-direction: column;
            gap: 18px;
            flex-shrink: 0;
        }
        
        .shop-scene {
            text-align: center;
        }
        
        .pixel-shop {
            font-size: 60px;
            margin: 15px 0;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .pixel-character {
            font-size: 50px;
            display: inline-block;
            animation: bounce 1s ease-in-out infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .game-text {
            font-size: 14px;
            line-height: 1.6;
            color: #fff;
            margin: 10px 0;
        }
        
        .question-box {
            background: #2a2a4e;
            border: 2px solid #ffd700;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .question-title {
            font-size: 16px;
            color: #ffd700;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .code-display {
            background: #0a0a1a;
            border: 2px solid #44ff44;
            border-radius: 5px;
            padding: 12px;
            margin: 12px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #44ff44;
            overflow-x: auto;
            line-height: 1.5;
        }
        
        .code-keyword {
            color: #ff44ff;
        }
        
        .code-string {
            color: #ffff44;
        }
        
        .code-number {
            color: #44ffff;
        }
        
        .code-comment {
            color: #888;
        }
        
        .input-container {
            margin: 25px 0;
        }
        
        .game-input {
            width: 100%;
            padding: 12px;
            font-family: 'Press Start 2P', cursive;
            font-size: 13px;
            background: #0a0a1a;
            color: #ffd700;
            border: 2px solid #ffd700;
            border-radius: 5px;
            outline: none;
            margin-top: 8px;
        }
        
        .game-input:focus {
            border-color: #44ff44;
            box-shadow: 0 0 10px rgba(68, 255, 68, 0.3);
        }
        
        .button-group {
            display: flex;
            gap: 18px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 25px 0;
        }
        
        .game-button {
            padding: 12px 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 13px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 0 #3a3a6a;
            position: relative;
            top: 0;
        }
        
        .game-button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 0 #3a3a6a, 0 0 20px rgba(102, 126, 234, 0.5);
        }
        
        .game-button:active {
            top: 4px;
            box-shadow: 0 0 0 #3a3a6a;
        }
        
        .game-button.primary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            box-shadow: 0 4px 0 #aa3344;
        }
        
        .game-button.primary:hover {
            box-shadow: 0 6px 0 #aa3344, 0 0 20px rgba(240, 147, 251, 0.5);
        }
        
        .game-button.primary:active {
            box-shadow: 0 0 0 #aa3344;
        }
        
        .game-button.success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            box-shadow: 0 4px 0 #0d6655;
        }
        
        .game-button.success:hover {
            box-shadow: 0 6px 0 #0d6655, 0 0 20px rgba(56, 239, 125, 0.5);
        }
        
        .game-button.success:active {
            box-shadow: 0 0 0 #0d6655;
        }
        
        .stats-panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .stat-item {
            background: linear-gradient(135deg, #2a2a4e 0%, #1a1a3e 100%);
            border: 2px solid #ffd700;
            border-radius: 8px;
            padding: 12px 15px;
            text-align: center;
        }
        
        .stat-label {
            font-size: 11px;
            color: #88ccff;
            margin-bottom: 6px;
        }
        
        .stat-value {
            font-size: 18px;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        .feedback {
            margin: 15px 0;
            padding: 12px;
            border-radius: 8px;
            font-size: 13px;
            text-align: center;
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .feedback.correct {
            background: rgba(56, 239, 125, 0.2);
            border: 2px solid #38ef7d;
            color: #38ef7d;
        }
        
        .feedback.incorrect {
            background: rgba(255, 68, 68, 0.2);
            border: 2px solid #ff4444;
            color: #ff4444;
        }
        
        .feedback.info {
            background: rgba(136, 204, 255, 0.2);
            border: 2px solid #88ccff;
            color: #88ccff;
        }
        
        .progress-bar {
            background: #1a1a2e;
            border: 3px solid #ffd700;
            border-radius: 10px;
            height: 40px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease-out;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .progress-text {
            font-size: 16px;
            color: white;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }
        
        .choice-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .choice-button {
            padding: 15px;
            font-family: 'Press Start 2P', cursive;
            font-size: 13px;
            background: linear-gradient(135deg, #2a2a4e 0%, #1a1a3e 100%);
            color: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            line-height: 1.5;
        }
        
        .choice-button:hover {
            border-color: #ffd700;
            background: linear-gradient(135deg, #3a3a5e 0%, #2a2a4e 100%);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .choice-button.selected {
            border-color: #44ff44;
            background: linear-gradient(135deg, #1a4a2a 0%, #0a2a1a 100%);
        }
        
        .choice-button.wrong {
            border-color: #ff4444;
            background: linear-gradient(135deg, #4a1a1a 0%, #2a0a0a 100%);
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }
        
        .success-impact {
            position: fixed;
            width: 15px;
            height: 15px;
            z-index: 1000;
            pointer-events: none;
            font-size: 20px;
            animation: confettiFall 3s ease-in forwards;
        }
        
        @keyframes confettiFall {
            0% {
                opacity: 1;
                transform: translateY(0) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(720deg);
            }
        }
        
        .fail-impact {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 120px;
            z-index: 1000;
            animation: failExplosion 1s ease-out forwards;
            pointer-events: none;
            filter: drop-shadow(0 0 20px rgba(255, 68, 68, 0.9));
        }
        
        @keyframes failExplosion {
            0% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.2) rotate(0deg);
                filter: drop-shadow(0 0 20px rgba(255, 68, 68, 0.9)) brightness(1.5);
            }
            10% {
                transform: translate(-45%, -50%) scale(1.1) rotate(-10deg);
            }
            20% {
                transform: translate(-55%, -50%) scale(1.15) rotate(10deg);
            }
            30% {
                transform: translate(-45%, -50%) scale(1.1) rotate(-15deg);
            }
            40% {
                transform: translate(-55%, -50%) scale(1.15) rotate(15deg);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.3) rotate(0deg);
                filter: drop-shadow(0 0 40px rgba(255, 68, 68, 1)) brightness(2);
            }
            70% {
                opacity: 0.8;
                transform: translate(-50%, -50%) scale(0.8) rotate(180deg);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.3) rotate(360deg);
                filter: drop-shadow(0 0 10px rgba(255, 68, 68, 0.3)) brightness(0.3);
            }
        }
        
        @keyframes flashSuccess {
            0% {
                opacity: 0;
            }
            30% {
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }
        
        @keyframes flashFail {
            0% {
                opacity: 0;
            }
            20% {
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        .celebration {
            text-align: center;
            padding: 30px;
        }
        
        .trophy {
            font-size: 80px;
            animation: spin 2s ease-in-out infinite;
        }
        
        @keyframes spin {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(-10deg) scale(1.1); }
            75% { transform: rotate(10deg) scale(1.1); }
        }
        
        .final-score {
            font-size: 20px;
            color: #ffd700;
            margin: 15px 0;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
        }
        
        .hint-box {
            background: rgba(136, 204, 255, 0.1);
            border: 2px solid #88ccff;
            border-radius: 8px;
            padding: 12px;
            margin: 12px 0;
            font-size: 12px;
            color: #88ccff;
            line-height: 1.5;
        }
        
        .hint-icon {
            color: #ffd700;
            margin-right: 5px;
        }
        
        .item-display {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .item-card {
            background: linear-gradient(135deg, #2a2a4e 0%, #1a1a3e 100%);
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            flex: 1;
            min-width: 150px;
        }
        
        .item-icon {
            font-size: 40px;
            margin: 10px 0;
        }
        
        .item-name {
            font-size: 16px;
            color: #ffd700;
            margin: 8px 0;
        }
        
        .item-price {
            font-size: 15px;
            color: #44ff44;
            margin: 5px 0;
        }
        
        .hp-bar-container {
            background: #0a0a1a;
            border: 2px solid #ff4444;
            border-radius: 8px;
            padding: 10px 15px;
            text-align: center;
        }
        
        .hp-bar-label {
            font-size: 11px;
            color: #ff8888;
            margin-bottom: 6px;
        }
        
        .hp-bar-wrapper {
            background: #1a1a2e;
            border: 2px solid #ff4444;
            border-radius: 10px;
            height: 25px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
        }
        
        .hp-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4444 0%, #ff8888 100%);
            border-radius: 8px;
            transition: width 0.5s ease, background 0.3s;
            box-shadow: 0 0 10px rgba(255, 68, 68, 0.5);
            position: relative;
        }
        
        .hp-bar-fill.low {
            background: linear-gradient(90deg, #ff8800 0%, #ffaa00 100%);
            animation: pulse 1s ease-in-out infinite;
        }
        
        .hp-bar-fill.critical {
            background: linear-gradient(90deg, #cc0000 0%, #ff0000 100%);
            animation: pulse 0.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .hp-bar-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 11px;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            font-weight: bold;
            z-index: 1;
        }
        
        @media (max-width: 768px) {
            .game-container {
                padding: 15px;
            }
            
            .game-title {
                font-size: 18px;
            }
            
            .subtitle {
                font-size: 11px;
            }
            
            .game-text {
                font-size: 12px;
            }
            
            .game-button {
                font-size: 11px;
                padding: 12px 20px;
            }
            
            .choice-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1 class="game-title">ğŸ® Python ì—°ì‚°ì & Input ê²Œì„</h1>
            <p class="subtitle">âš”ï¸ ë§ˆë²• ìƒì ì—ì„œ ë°°ìš°ëŠ” ê³„ì‚°ê³¼ ì…ë ¥ë°›ê¸°</p>
        </div>
        
        <div class="game-main">
            <div class="game-screen" id="gameScreen">
                <!-- ê²Œì„ í™”ë©´ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <div class="game-sidebar">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar" style="width: 0%">
                    </div>
                    <div class="progress-text" id="progressText">0 / 0</div>
                </div>
                
                <div style="background: linear-gradient(135deg, #1a1a3e 0%, #0a0a1a 100%); border: 2px solid #88ccff; border-radius: 8px; padding: 15px;">
                    <div style="font-size: 14px; color: #88ccff; margin-bottom: 10px; text-align: center;">âš¡ ì•¡ì…˜ ì½”ë“œ</div>
                    <div id="actionCodeDisplay" style="background: #0a0a1a; border: 2px solid #44ff44; border-radius: 5px; padding: 12px; font-family: 'Courier New', monospace; font-size: 12px; color: #44ff44; line-height: 1.6; max-height: 200px; overflow-y: auto;">
                        # ì•¡ì…˜ì„ ì·¨í•˜ë©´<br># ì—¬ê¸°ì— ì½”ë“œê°€ í‘œì‹œë©ë‹ˆë‹¤
                    </div>
                </div>
                
                <div class="hp-bar-container">
                    <div class="hp-bar-label">â¤ï¸ HP</div>
                    <div class="hp-bar-wrapper">
                        <div class="hp-bar-fill" id="hpBar" style="width: 100%"></div>
                        <div class="hp-bar-text" id="hpText">100 / 100</div>
                    </div>
                </div>
                
                <div style="background: linear-gradient(135deg, #2a2a4e 0%, #1a1a3e 100%); border: 2px solid #44ff44; border-radius: 8px; padding: 15px; text-align: center;">
                    <div style="font-size: 15px; color: #44ff44; margin-bottom: 10px;">ğŸ§ª ìƒì </div>
                    <div style="font-size: 13px; color: #88ccff; margin-bottom: 12px;">ì²´ë ¥ í¬ì…˜<br>300 ê³¨ë“œ</div>
                    <button onclick="buyPotion()" class="game-button success" style="width: 100%; font-size: 14px; padding: 12px;">êµ¬ë§¤í•˜ê¸°</button>
                </div>
                
                <div class="stats-panel">
                    <div class="stat-item">
                        <div class="stat-label">â­ ì ìˆ˜</div>
                        <div class="stat-value" id="scoreDisplay">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">ğŸ’° ê³¨ë“œ</div>
                        <div class="stat-value" id="goldDisplay">1000</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">ğŸ¯ ë ˆë²¨</div>
                        <div class="stat-value" id="levelDisplay">1</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ê²Œì„ ìƒíƒœ
        let currentStage = 0;
        let score = 0;
        let gold = 1000;
        let level = 1;
        let hp = 100;
        let maxHp = 100;
        let playerName = "ìš©ì‚¬";
        let inventory = [];
        let quizPool = [];
        let usedStages = [];
        let remainingStages = [];
        let totalQuestions = 0;
        let correctAnswers = 0;  // ì •ë‹µ ê°œìˆ˜ ì¶”ì 
        let difficultyMultiplier = 1;  // ë‚œì´ë„ ë°°ìˆ˜

        // ê²Œì„ ìŠ¤í…Œì´ì§€ ì •ì˜
        const stages = [
            // ìŠ¤í…Œì´ì§€ 0: í™˜ì˜ ë° ì´ë¦„ ì…ë ¥
            {
                type: 'input',
                title: 'ğŸ® ë§ˆë²• ìƒì ì— ì˜¤ì‹  ê±¸ í™˜ì˜í•©ë‹ˆë‹¤!',
                scene: `
                    <div class="shop-scene">
                        <div class="pixel-shop">ğŸª</div>
                        <div class="pixel-character">ğŸ§™</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ì‹ ë¹„ë¡œìš´ ë§ˆë²• ìƒì ì— ë„ì°©í–ˆìŠµë‹ˆë‹¤!<br>
                        ì—¬ê¸°ì„œëŠ” Pythonì˜ ì—°ì‚°ìì™€ input()ì„ ë°°ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><br>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            Pythonì—ì„œ <span style="color: #ffd700;">input()</span> í•¨ìˆ˜ëŠ”<br>
                            í”Œë ˆì´ì–´ë¡œë¶€í„° ì •ë³´ë¥¼ ì…ë ¥ë°›ëŠ” ë§ˆë²•ì…ë‹ˆë‹¤!
                        </div>
                    </div>
                `,
                question: 'ëª¨í—˜ê°€ë‹˜ì˜ ì´ë¦„ì„ ì•Œë ¤ì£¼ì„¸ìš”:',
                inputPlaceholder: 'ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ìš©ì‚¬)',
                correctAnswer: null, // ëª¨ë“  ë‹µ í—ˆìš©
                onAnswer: (answer) => {
                    if (answer.trim() === '') {
                        return { correct: false, message: 'ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!' };
                    }
                    playerName = answer.trim();
                    return { 
                        correct: true, 
                        message: `í™˜ì˜í•©ë‹ˆë‹¤, ${playerName}ë‹˜! ğŸ‰<br>Python ì½”ë“œ: <code>name = input("ì´ë¦„: ")</code>`,
                        points: 50
                    };
                }
            },
            
            // ìŠ¤í…Œì´ì§€ 1: ë§ì…ˆ ì—°ì‚°ì
            {
                type: 'quiz',
                title: 'âš”ï¸ ë ˆë²¨ì—… ì‹œìŠ¤í…œ',
                scene: `
                    <div class="shop-scene">
                        <div class="pixel-character">â¬†ï¸</div>
                        <div style="font-size: 40px; margin: 20px 0;">âœ¨ ë ˆë²¨ì—…! âœ¨</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ${playerName}ë‹˜ì´ í€˜ìŠ¤íŠ¸ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!<br>
                        ê²½í—˜ì¹˜ë¥¼ íšë“í•˜ê³  ë ˆë²¨ì—…ì„ í–ˆì–´ìš”.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">level</span> = <span class="code-number">5</span><br>
<span class="code-keyword">level</span> = <span class="code-keyword">level</span> + <span class="code-number">1</span>  <span class="code-comment"># ë ˆë²¨ì—…!</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"ë ˆë²¨:"</span>, <span class="code-keyword">level</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            <strong>ë§ì…ˆ ì—°ì‚°ì (+)</strong><br>
                            ê²Œì„ì—ì„œ ë ˆë²¨ì—…, ì•„ì´í…œ íšë“, ê³¨ë“œ ì¦ê°€ ë“±ì— ì‚¬ìš©ë©ë‹ˆë‹¤!
                        </div>
                    </div>
                `,
                question: 'ìœ„ ì½”ë“œì˜ ê²°ê³¼ëŠ”?',
                choices: ['ë ˆë²¨: 5', 'ë ˆë²¨: 6', 'ë ˆë²¨: 7', 'ì˜¤ë¥˜ ë°œìƒ'],
                correctAnswer: 1,
                explanation: 'ì •ë‹µ! level = 5 + 1 = 6ì´ ë©ë‹ˆë‹¤. âœ…'
            },
            
            // ìŠ¤í…Œì´ì§€ 2: ëº„ì…ˆ ì—°ì‚°ì
            {
                type: 'quiz',
                title: 'ğŸ’¥ ì „íˆ¬ ë°ë¯¸ì§€ ê³„ì‚°',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ§™ âš”ï¸ ğŸ‘¾</div>
                        <div style="font-size: 30px; margin: 20px 0;">ğŸ’¥ ê³µê²©!</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ${playerName}ë‹˜ì´ ëª¬ìŠ¤í„°ì™€ ì „íˆ¬ ì¤‘ì…ë‹ˆë‹¤!<br>
                        ì²´ë ¥ì´ 100ì´ì—ˆëŠ”ë° 35 ë°ë¯¸ì§€ë¥¼ ë°›ì•˜ì–´ìš”.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">hp</span> = <span class="code-number">100</span><br>
<span class="code-keyword">damage</span> = <span class="code-number">35</span><br>
<span class="code-keyword">hp</span> = <span class="code-keyword">hp</span> - <span class="code-keyword">damage</span>  <span class="code-comment"># ë°ë¯¸ì§€ë¥¼ ë°›ìŒ!</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"ë‚¨ì€ ì²´ë ¥:"</span>, <span class="code-keyword">hp</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            <strong>ëº„ì…ˆ ì—°ì‚°ì (-)</strong><br>
                            ë°ë¯¸ì§€ ê³„ì‚°, ì•„ì´í…œ ì‚¬ìš©, ê³¨ë“œ ì§€ë¶ˆ ë“±ì— ì‚¬ìš©ë©ë‹ˆë‹¤!
                        </div>
                    </div>
                `,
                question: 'ë‚¨ì€ ì²´ë ¥ì€?',
                choices: ['100', '65', '35', '135'],
                correctAnswer: 1,
                explanation: 'ì •ë‹µ! 100 - 35 = 65ì˜ ì²´ë ¥ì´ ë‚¨ìŠµë‹ˆë‹¤. âœ…'
            },
            
            // ìŠ¤í…Œì´ì§€ 3: ê³±ì…ˆ ì—°ì‚°ì
            {
                type: 'quiz',
                title: 'âš¡ í¬ë¦¬í‹°ì»¬ íˆíŠ¸!',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ’¥</div>
                        <div style="font-size: 35px; margin: 20px 0; color: #ff4444;">CRITICAL!</div>
                        <div style="font-size: 50px;">âš”ï¸ Ã— 2</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ${playerName}ë‹˜ì˜ í¬ë¦¬í‹°ì»¬ ê³µê²©!<br>
                        ê¸°ë³¸ ë°ë¯¸ì§€ê°€ 2ë°°ê°€ ë©ë‹ˆë‹¤!<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">base_damage</span> = <span class="code-number">50</span><br>
<span class="code-keyword">critical</span> = <span class="code-number">2</span><br>
<span class="code-keyword">total_damage</span> = <span class="code-keyword">base_damage</span> * <span class="code-keyword">critical</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"í¬ë¦¬í‹°ì»¬ ë°ë¯¸ì§€:"</span>, <span class="code-keyword">total_damage</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            <strong>ê³±ì…ˆ ì—°ì‚°ì (*)</strong><br>
                            í¬ë¦¬í‹°ì»¬, ë²„í”„ íš¨ê³¼, ê²½í—˜ì¹˜ ë°°ìˆ˜ ì´ë²¤íŠ¸ ë“±ì— ì‚¬ìš©ë©ë‹ˆë‹¤!
                        </div>
                    </div>
                `,
                question: 'í¬ë¦¬í‹°ì»¬ ë°ë¯¸ì§€ëŠ”?',
                choices: ['50', '52', '100', '25'],
                correctAnswer: 2,
                explanation: 'ì •ë‹µ! 50 Ã— 2 = 100 í¬ë¦¬í‹°ì»¬ ë°ë¯¸ì§€! âš¡'
            },
            
            // ìŠ¤í…Œì´ì§€ 4: ë³µí•© ëŒ€ì… ì—°ì‚°ì
            {
                type: 'quiz',
                title: 'ğŸ’° ê³¨ë“œ íšë“!',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ’°</div>
                        <div style="font-size: 30px; margin: 20px 0;">+50 ê³¨ë“œ</div>
                        <div class="pixel-character">ğŸ‰</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ${playerName}ë‹˜ì´ í€˜ìŠ¤íŠ¸ë¥¼ ì™„ë£Œí•˜ê³  ë³´ìƒì„ ë°›ì•˜ìŠµë‹ˆë‹¤!<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">gold</span> = <span class="code-number">100</span><br>
<span class="code-keyword">gold</span> += <span class="code-number">50</span>  <span class="code-comment"># gold = gold + 50ê³¼ ê°™ìŒ</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"ì´ ê³¨ë“œ:"</span>, <span class="code-keyword">gold</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            <strong>ë³µí•© ëŒ€ì… ì—°ì‚°ì (+=)</strong><br>
                            gold += 50ì€ gold = gold + 50ê³¼ ë˜‘ê°™ì•„ìš”!<br>
                            ë” ì§§ê³  í¸ë¦¬í•˜ê²Œ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ˜Š
                        </div>
                    </div>
                `,
                question: 'gold += 50 ì‹¤í–‰ í›„ ì´ ê³¨ë“œëŠ”?',
                choices: ['50', '100', '150', '500'],
                correctAnswer: 2,
                explanation: 'ì •ë‹µ! 100 + 50 = 150 ê³¨ë“œì…ë‹ˆë‹¤. âœ…<br>gold += 50ì€ í¸ë¦¬í•œ ì¶•ì•½í˜•ì…ë‹ˆë‹¤!'
            },
            
            // ìŠ¤í…Œì´ì§€ 5: ë¹„êµ ì—°ì‚°ì
            {
                type: 'quiz',
                title: 'ğŸšª ë˜ì „ ì…ì¥ ì¡°ê±´',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ°</div>
                        <div style="font-size: 30px; margin: 20px 0;">ë˜ì „ ì…êµ¬</div>
                        <div style="font-size: 20px;">âš ï¸ ë ˆë²¨ 10 ì´ìƒ í•„ìš”</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ë˜ì „ì— ì…ì¥í•˜ë ¤ë©´ ë ˆë²¨ 10 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.<br>
                        ${playerName}ë‹˜ì˜ í˜„ì¬ ë ˆë²¨ì€ 15ì…ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">player_level</span> = <span class="code-number">15</span><br>
<span class="code-keyword">min_level</span> = <span class="code-number">10</span><br>
<span class="code-keyword">can_enter</span> = <span class="code-keyword">player_level</span> >= <span class="code-keyword">min_level</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"ì…ì¥ ê°€ëŠ¥:"</span>, <span class="code-keyword">can_enter</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            <strong>ë¹„êµ ì—°ì‚°ì (>=)</strong><br>
                            >= ëŠ” "í¬ê±°ë‚˜ ê°™ë‹¤"ëŠ” ëœ»ì…ë‹ˆë‹¤.<br>
                            ê²°ê³¼ëŠ” True ë˜ëŠ” Falseê°€ ë©ë‹ˆë‹¤!
                        </div>
                    </div>
                `,
                question: 'can_enterì˜ ê°’ì€?',
                choices: ['True', 'False', '15', '10'],
                correctAnswer: 0,
                explanation: 'ì •ë‹µ! 15 >= 10ì€ Trueì…ë‹ˆë‹¤. ë˜ì „ ì…ì¥ ê°€ëŠ¥! ğŸ‰'
            },
            
            // ìŠ¤í…Œì´ì§€ 6: input()ìœ¼ë¡œ ìˆ«ì ì…ë ¥
            {
                type: 'input',
                title: 'ğŸ§ª ë§ˆë²• ë¬¼ì•½ êµ¬ë§¤',
                scene: `
                    <div class="shop-scene">
                        <div class="pixel-shop">ğŸª</div>
                        <div class="item-display">
                            <div class="item-card">
                                <div class="item-icon">ğŸ§ª</div>
                                <div class="item-name">ì²´ë ¥ ë¬¼ì•½</div>
                                <div class="item-price">50 ê³¨ë“œ</div>
                            </div>
                            <div class="item-card">
                                <div class="item-icon">ğŸ’™</div>
                                <div class="item-name">ë§ˆë‚˜ ë¬¼ì•½</div>
                                <div class="item-price">30 ê³¨ë“œ</div>
                            </div>
                        </div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ìƒì ì—ì„œ ë¬¼ì•½ì„ êµ¬ë§¤í•©ë‹ˆë‹¤.<br>
                        ì²´ë ¥ ë¬¼ì•½ì€ 50 ê³¨ë“œì…ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">potion_price</span> = <span class="code-number">50</span><br>
<span class="code-keyword">buy_count</span> = <span class="code-keyword">input</span>(<span class="code-string">"ëª‡ ê°œ ì‚´ê¹Œìš”? "</span>)<br>
<span class="code-keyword">buy_count</span> = <span class="code-keyword">int</span>(<span class="code-keyword">buy_count</span>)  <span class="code-comment"># ë¬¸ìë¥¼ ìˆ«ìë¡œ!</span><br>
<span class="code-keyword">total</span> = <span class="code-keyword">potion_price</span> * <span class="code-keyword">buy_count</span>
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            <strong>ì¤‘ìš”!</strong> input()ì€ í•­ìƒ ë¬¸ìì—´ë¡œ ë°›ìŠµë‹ˆë‹¤.<br>
                            ê³„ì‚°í•˜ë ¤ë©´ <span style="color: #ffd700;">int()</span>ë¡œ ìˆ«ìë¡œ ë³€í™˜í•´ì•¼ í•´ìš”!
                        </div>
                    </div>
                `,
                question: 'ì²´ë ¥ ë¬¼ì•½ì„ ëª‡ ê°œ êµ¬ë§¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
                inputPlaceholder: 'ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš” (1-10)',
                correctAnswer: null,
                onAnswer: (answer) => {
                    const num = parseInt(answer);
                    if (isNaN(num) || num < 1 || num > 10) {
                        return { correct: false, message: '1ë¶€í„° 10 ì‚¬ì´ì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!' };
                    }
                    const total = 50 * num;
                    gold -= total;
                    inventory.push(`ğŸ§ª ì²´ë ¥ ë¬¼ì•½ Ã— ${num}`);
                    updateStats();
                    return { 
                        correct: true, 
                        message: `ì²´ë ¥ ë¬¼ì•½ ${num}ê°œ êµ¬ë§¤! ì´ ${total} ê³¨ë“œ ì§€ë¶ˆ ğŸ’°<br>Pythonì´ ìë™ìœ¼ë¡œ 50 Ã— ${num} = ${total}ì„ ê³„ì‚°í–ˆì–´ìš”!`,
                        points: 100
                    };
                }
            },
            
            // ìŠ¤í…Œì´ì§€ 7: ë‚˜ëˆ„ê¸° ì—°ì‚°ì
            {
                type: 'quiz',
                title: 'ğŸ’° íŒŒí‹° ê³¨ë“œ ë¶„ë°°',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 50px;">ğŸ‘¥ ğŸ‘¥ ğŸ‘¥ ğŸ‘¥</div>
                        <div style="font-size: 30px; margin: 20px 0;">ğŸ’° ê³¨ë“œ ë¶„ë°°</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        íŒŒí‹°ê°€ ë³´ìŠ¤ë¥¼ ì²˜ì¹˜í•˜ê³  1000 ê³¨ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!<br>
                        4ëª…ì˜ íŒŒí‹°ì›ì—ê²Œ ê³µí‰í•˜ê²Œ ë‚˜ëˆ ì¤ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">total_gold</span> = <span class="code-number">1000</span><br>
<span class="code-keyword">party_members</span> = <span class="code-number">4</span><br>
<span class="code-keyword">gold_per_person</span> = <span class="code-keyword">total_gold</span> / <span class="code-keyword">party_members</span><br>
<span class="code-keyword">print</span>(<span class="code-keyword">gold_per_person</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            <strong>ë‚˜ëˆ„ê¸° ì—°ì‚°ì (/)</strong><br>
                            ë‚˜ëˆ„ê¸°ëŠ” í•­ìƒ ì†Œìˆ˜ì  ê²°ê³¼ë¥¼ ë§Œë“­ë‹ˆë‹¤!
                        </div>
                    </div>
                `,
                question: '1ì¸ë‹¹ ë°›ëŠ” ê³¨ë“œëŠ”?',
                choices: ['250', '250.0', '4', '1000'],
                correctAnswer: 1,
                explanation: 'ì •ë‹µ! 1000 / 4 = 250.0ì…ë‹ˆë‹¤. (ì†Œìˆ˜ì  ê²°ê³¼) âœ…'
            },
            
            // ìŠ¤í…Œì´ì§€ 8: ê³±ì…ˆ ì‘ìš©
            {
                type: 'quiz',
                title: 'ğŸ ê²½í—˜ì¹˜ 2ë°° ì´ë²¤íŠ¸',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸŠ</div>
                        <div style="font-size: 35px; margin: 20px 0; color: #ffd700;">EXP Ã— 2 EVENT!</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ì£¼ë§ ì´ë²¤íŠ¸ë¡œ ê²½í—˜ì¹˜ 2ë°°!<br>
                        ê¸°ë³¸ ê²½í—˜ì¹˜ 75ë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">exp</span> = <span class="code-number">75</span><br>
<span class="code-keyword">event_exp</span> = <span class="code-keyword">exp</span> * <span class="code-number">2</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"ì´ë²¤íŠ¸ ê²½í—˜ì¹˜:"</span>, <span class="code-keyword">event_exp</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            ê²Œì„ ì´ë²¤íŠ¸ì—ì„œ ê³±ì…ˆì´ ìì£¼ ì‚¬ìš©ë©ë‹ˆë‹¤!
                        </div>
                    </div>
                `,
                question: 'ì´ë²¤íŠ¸ë¡œ ì–»ëŠ” ê²½í—˜ì¹˜ëŠ”?',
                choices: ['75', '77', '150', '2'],
                correctAnswer: 2,
                explanation: 'ì •ë‹µ! 75 Ã— 2 = 150 ê²½í—˜ì¹˜! ğŸ‰'
            },
            
            // ìŠ¤í…Œì´ì§€ 9: -= ì—°ì‚°ì
            {
                type: 'quiz',
                title: 'ğŸ—¡ï¸ ëª¬ìŠ¤í„° ë°˜ê²©',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ‘¹ â†’ ğŸ§™</div>
                        <div style="font-size: 30px; margin: 20px 0; color: #ff4444;">ğŸ’¢ ë°˜ê²©!</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ë³´ìŠ¤ ëª¬ìŠ¤í„°ê°€ ê°•ë ¥í•œ ë°˜ê²©ì„ í–ˆìŠµë‹ˆë‹¤!<br>
                        ì²´ë ¥ 200ì—ì„œ 45 ë°ë¯¸ì§€ë¥¼ ë°›ì•˜ì–´ìš”.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">hp</span> = <span class="code-number">200</span><br>
<span class="code-keyword">hp</span> -= <span class="code-number">45</span>  <span class="code-comment"># hp = hp - 45</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"ë‚¨ì€ HP:"</span>, <span class="code-keyword">hp</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            <strong>-= ì—°ì‚°ì</strong><br>
                            hp -= 45ëŠ” hp = hp - 45ì˜ ì¶•ì•½í˜•ì…ë‹ˆë‹¤!
                        </div>
                    </div>
                `,
                question: 'ë‚¨ì€ HPëŠ”?',
                choices: ['245', '200', '155', '45'],
                correctAnswer: 2,
                explanation: 'ì •ë‹µ! 200 - 45 = 155 HPì…ë‹ˆë‹¤. âœ…'
            },
            
            // ìŠ¤í…Œì´ì§€ 10: *= ì—°ì‚°ì
            {
                type: 'quiz',
                title: 'âš—ï¸ ë²„í”„ ë§ˆë²•',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">âœ¨ğŸ”®âœ¨</div>
                        <div style="font-size: 30px; margin: 20px 0; color: #88ccff;">ê³µê²©ë ¥ 3ë°° ë²„í”„!</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ë§ˆë²•ì‚¬ê°€ ê³µê²©ë ¥ ë²„í”„ë¥¼ ê±¸ì—ˆìŠµë‹ˆë‹¤!<br>
                        ê¸°ë³¸ ê³µê²©ë ¥ì´ 3ë°°ê°€ ë©ë‹ˆë‹¤!<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">attack</span> = <span class="code-number">20</span><br>
<span class="code-keyword">attack</span> *= <span class="code-number">3</span>  <span class="code-comment"># attack = attack * 3</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"ë²„í”„ ê³µê²©ë ¥:"</span>, <span class="code-keyword">attack</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            <strong>*= ì—°ì‚°ì</strong><br>
                            attack *= 3ì€ attack = attack * 3ì˜ ì¶•ì•½í˜•!
                        </div>
                    </div>
                `,
                question: 'ë²„í”„ í›„ ê³µê²©ë ¥ì€?',
                choices: ['20', '23', '60', '6'],
                correctAnswer: 2,
                explanation: 'ì •ë‹µ! 20 Ã— 3 = 60 ê³µê²©ë ¥! âš¡'
            },
            
            // ìŠ¤í…Œì´ì§€ 11: < ë¹„êµ ì—°ì‚°ì
            {
                type: 'quiz',
                title: 'âš ï¸ ìœ„í—˜ ê²½ê³ ',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">â¤ï¸</div>
                        <div style="font-size: 30px; margin: 20px 0; color: #ff4444;">âš ï¸ ì²´ë ¥ ë¶€ì¡±!</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ì²´ë ¥ì´ ë‚®ìœ¼ë©´ ê²½ê³ ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.<br>
                        í˜„ì¬ ì²´ë ¥ì´ 25ì…ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">hp</span> = <span class="code-number">25</span><br>
<span class="code-keyword">is_danger</span> = <span class="code-keyword">hp</span> < <span class="code-number">50</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"ìœ„í—˜:"</span>, <span class="code-keyword">is_danger</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            <strong>< ì—°ì‚°ì</strong><br>
                            25 < 50ì€ "25ê°€ 50ë³´ë‹¤ ì‘ë‹¤"ëŠ” ëœ»!
                        </div>
                    </div>
                `,
                question: 'is_dangerì˜ ê°’ì€?',
                choices: ['True', 'False', '25', '50'],
                correctAnswer: 0,
                explanation: 'ì •ë‹µ! 25 < 50ì€ Trueì…ë‹ˆë‹¤. ìœ„í—˜ ìƒíƒœ! âš ï¸'
            },
            
            // ìŠ¤í…Œì´ì§€ 12: == ë¹„êµ ì—°ì‚°ì
            {
                type: 'quiz',
                title: 'ğŸ¯ ì •í™•íˆ ë§ì¶”ê¸°',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ¯</div>
                        <div style="font-size: 30px; margin: 20px 0;">ì •í™•ë„ ì²´í¬</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ìƒì ì—ì„œ ë¬¼ê±´ì„ ì •í™•íˆ 100 ê³¨ë“œì— ì‚´ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.<br>
                        í˜„ì¬ ì†Œì§€ê¸ˆì€ 100 ê³¨ë“œì…ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">my_gold</span> = <span class="code-number">100</span><br>
<span class="code-keyword">item_price</span> = <span class="code-number">100</span><br>
<span class="code-keyword">can_buy</span> = <span class="code-keyword">my_gold</span> == <span class="code-keyword">item_price</span><br>
<span class="code-keyword">print</span>(<span class="code-keyword">can_buy</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            <strong>== ì—°ì‚°ì</strong><br>
                            ==ëŠ” "ê°™ë‹¤"ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. (=ëŠ” ëŒ€ì…!)
                        </div>
                    </div>
                `,
                question: 'can_buyì˜ ê°’ì€?',
                choices: ['True', 'False', '100', '200'],
                correctAnswer: 0,
                explanation: 'ì •ë‹µ! 100 == 100ì€ Trueì…ë‹ˆë‹¤. ì •í™•íˆ ì¼ì¹˜! âœ…'
            },
            
            // ìŠ¤í…Œì´ì§€ 13: != ë¹„êµ ì—°ì‚°ì
            {
                type: 'quiz',
                title: 'ğŸ©¹ ìƒíƒœ ì´ìƒ ì²´í¬',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ§™</div>
                        <div style="font-size: 30px; margin: 20px 0;">ğŸ’š ì •ìƒ ìƒíƒœ?</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ìºë¦­í„°ê°€ ì¤‘ë… ìƒíƒœê°€ ì•„ë‹Œì§€ í™•ì¸í•©ë‹ˆë‹¤.<br>
                        í˜„ì¬ ìƒíƒœëŠ” "ì •ìƒ"ì…ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">status</span> = <span class="code-string">"ì •ìƒ"</span><br>
<span class="code-keyword">is_healthy</span> = <span class="code-keyword">status</span> != <span class="code-string">"ì¤‘ë…"</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"ê±´ê°•:"</span>, <span class="code-keyword">is_healthy</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            <strong>!= ì—°ì‚°ì</strong><br>
                            !=ëŠ” "ê°™ì§€ ì•Šë‹¤"ë¥¼ í™•ì¸í•©ë‹ˆë‹¤!
                        </div>
                    </div>
                `,
                question: 'is_healthyì˜ ê°’ì€?',
                choices: ['True', 'False', 'ì •ìƒ', 'ì¤‘ë…'],
                correctAnswer: 0,
                explanation: 'ì •ë‹µ! "ì •ìƒ" != "ì¤‘ë…"ì€ Trueì…ë‹ˆë‹¤. ê±´ê°•í•´ìš”! ğŸ’š'
            },
            
            // ìŠ¤í…Œì´ì§€ 14: > ë¹„êµ ì—°ì‚°ì
            {
                type: 'quiz',
                title: 'ğŸ’ ë ˆì–´ ì•„ì´í…œ í™•ì¸',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ’</div>
                        <div style="font-size: 30px; margin: 20px 0;">ğŸŒŸ ë ˆì–´ ë“±ê¸‰?</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ì•„ì´í…œ ë“±ê¸‰ì´ 10ë³´ë‹¤ í¬ë©´ ë ˆì–´ ì•„ì´í…œì…ë‹ˆë‹¤.<br>
                        íšë“í•œ ì•„ì´í…œì˜ ë“±ê¸‰ì€ 15ì…ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">item_grade</span> = <span class="code-number">15</span><br>
<span class="code-keyword">is_rare</span> = <span class="code-keyword">item_grade</span> > <span class="code-number">10</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"ë ˆì–´:"</span>, <span class="code-keyword">is_rare</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            <strong>> ì—°ì‚°ì</strong><br>
                            15 > 10ì€ "15ê°€ 10ë³´ë‹¤ í¬ë‹¤"!
                        </div>
                    </div>
                `,
                question: 'is_rareì˜ ê°’ì€?',
                choices: ['True', 'False', '15', '10'],
                correctAnswer: 0,
                explanation: 'ì •ë‹µ! 15 > 10ì€ Trueì…ë‹ˆë‹¤. ë ˆì–´ ì•„ì´í…œ íšë“! ğŸ’'
            },
            
            // ìŠ¤í…Œì´ì§€ 15: <= ë¹„êµ ì—°ì‚°ì
            {
                type: 'quiz',
                title: 'ğŸ« ì…ì¥ í‹°ì¼“ í™•ì¸',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸª</div>
                        <div style="font-size: 30px; margin: 20px 0;">ì´ë²¤íŠ¸ ì…ì¥</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ë ˆë²¨ 20 ì´í•˜ë§Œ ì…ì¥í•  ìˆ˜ ìˆëŠ” ì´ˆë³´ì ì´ë²¤íŠ¸ì…ë‹ˆë‹¤.<br>
                        ${playerName}ë‹˜ì˜ ë ˆë²¨ì€ 18ì…ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">player_level</span> = <span class="code-number">18</span><br>
<span class="code-keyword">can_enter</span> = <span class="code-keyword">player_level</span> <= <span class="code-number">20</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"ì…ì¥ ê°€ëŠ¥:"</span>, <span class="code-keyword">can_enter</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            <strong><= ì—°ì‚°ì</strong><br>
                            <=ëŠ” "ì‘ê±°ë‚˜ ê°™ë‹¤"ë¥¼ í™•ì¸í•©ë‹ˆë‹¤!
                        </div>
                    </div>
                `,
                question: 'can_enterì˜ ê°’ì€?',
                choices: ['True', 'False', '18', '20'],
                correctAnswer: 0,
                explanation: 'ì •ë‹µ! 18 <= 20ì€ Trueì…ë‹ˆë‹¤. ì…ì¥ ê°€ëŠ¥! ğŸ«'
            },
            
            // ìŠ¤í…Œì´ì§€ 16: ë³µí•© ê³„ì‚° 1
            {
                type: 'quiz',
                title: 'ğŸ›¡ï¸ ë°©ì–´ë ¥ ê³„ì‚°',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ›¡ï¸âš”ï¸</div>
                        <div style="font-size: 30px; margin: 20px 0;">ì‹¤ì œ ë°ë¯¸ì§€ ê³„ì‚°</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ê³µê²© ë°ë¯¸ì§€ì—ì„œ ë°©ì–´ë ¥ì„ ëº€ ê°’ì´ ì‹¤ì œ ë°ë¯¸ì§€ì…ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">attack_damage</span> = <span class="code-number">80</span><br>
<span class="code-keyword">defense</span> = <span class="code-number">25</span><br>
<span class="code-keyword">real_damage</span> = <span class="code-keyword">attack_damage</span> - <span class="code-keyword">defense</span><br>
<span class="code-keyword">print</span>(<span class="code-keyword">real_damage</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            ì‹¤ì œ ê²Œì„ì—ì„œ ìì£¼ ì“°ëŠ” ê³„ì‚°ì‹ì…ë‹ˆë‹¤!
                        </div>
                    </div>
                `,
                question: 'ì‹¤ì œ ë°›ëŠ” ë°ë¯¸ì§€ëŠ”?',
                choices: ['80', '25', '55', '105'],
                correctAnswer: 2,
                explanation: 'ì •ë‹µ! 80 - 25 = 55 ë°ë¯¸ì§€ì…ë‹ˆë‹¤! ğŸ›¡ï¸'
            },
            
            // ìŠ¤í…Œì´ì§€ 17: ë³µí•© ê³„ì‚° 2
            {
                type: 'quiz',
                title: 'ğŸ° ë³´ìƒ 3ë°°',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ°</div>
                        <div style="font-size: 35px; margin: 20px 0; color: #ffd700;">ëŒ€ë°•! 3ë°° ë³´ìƒ!</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ëŸ­í‚¤ ë°•ìŠ¤ì—ì„œ ëŒ€ë°•! ê¸°ë³¸ ë³´ìƒì˜ 3ë°°ë¥¼ ë°›ìŠµë‹ˆë‹¤!<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">base_reward</span> = <span class="code-number">30</span><br>
<span class="code-keyword">lucky_multiplier</span> = <span class="code-number">3</span><br>
<span class="code-keyword">total_reward</span> = <span class="code-keyword">base_reward</span> * <span class="code-keyword">lucky_multiplier</span><br>
<span class="code-keyword">print</span>(<span class="code-keyword">total_reward</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            ê³±ì…ˆìœ¼ë¡œ ë°°ìˆ˜ ë³´ìƒì„ ê³„ì‚°í•©ë‹ˆë‹¤!
                        </div>
                    </div>
                `,
                question: 'ì´ ë³´ìƒì€?',
                choices: ['30', '33', '90', '10'],
                correctAnswer: 2,
                explanation: 'ì •ë‹µ! 30 Ã— 3 = 90 ë³´ìƒì…ë‹ˆë‹¤! ëŒ€ë°•! ğŸ°'
            },
            
            // ìŠ¤í…Œì´ì§€ 18: ë³µí•© ê³„ì‚° 3
            {
                type: 'quiz',
                title: 'ğŸ’Š ì—°ì† íšŒë³µ',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ’ŠğŸ’ŠğŸ’Š</div>
                        <div style="font-size: 30px; margin: 20px 0;">íšŒë³µ ë¬¼ì•½ ì‚¬ìš©</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ì²´ë ¥ì´ 50ì´ì—ˆëŠ”ë° ë¬¼ì•½ 2ê°œë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.<br>
                        ë¬¼ì•½ 1ê°œë‹¹ 30ì”© íšŒë³µí•©ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">hp</span> = <span class="code-number">50</span><br>
<span class="code-keyword">hp</span> = <span class="code-keyword">hp</span> + <span class="code-number">30</span>  <span class="code-comment"># ì²« ë²ˆì§¸ ë¬¼ì•½</span><br>
<span class="code-keyword">hp</span> = <span class="code-keyword">hp</span> + <span class="code-number">30</span>  <span class="code-comment"># ë‘ ë²ˆì§¸ ë¬¼ì•½</span><br>
<span class="code-keyword">print</span>(<span class="code-keyword">hp</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            ë‹¨ê³„ë³„ë¡œ ì°¨ê·¼ì°¨ê·¼ ê³„ì‚°í•´ë³´ì„¸ìš”!
                        </div>
                    </div>
                `,
                question: 'ìµœì¢… ì²´ë ¥ì€?',
                choices: ['50', '80', '110', '60'],
                correctAnswer: 2,
                explanation: 'ì •ë‹µ! 50 + 30 + 30 = 110ì…ë‹ˆë‹¤! ì™„ì „ íšŒë³µ! ğŸ’š'
            },
            
            // ìŠ¤í…Œì´ì§€ 19: ë³µí•© ëŒ€ì… ì—°ì‚° ì‘ìš©
            {
                type: 'quiz',
                title: 'ğŸ¹ ì—°ì† ê³µê²©',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ¹ğŸ¹ğŸ¹</div>
                        <div style="font-size: 30px; margin: 20px 0;">3ì—°ì† í™”ì‚´!</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ê¶ìˆ˜ê°€ ì ì—ê²Œ ì—°ì† ê³µê²©ì„ ê°€í•©ë‹ˆë‹¤!<br>
                        ì ì˜ ì²´ë ¥ì—ì„œ ë°ë¯¸ì§€ë¥¼ ê³„ì† ë¹¼ì¤ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">enemy_hp</span> = <span class="code-number">100</span><br>
<span class="code-keyword">enemy_hp</span> -= <span class="code-number">20</span>  <span class="code-comment"># 1íƒ€</span><br>
<span class="code-keyword">enemy_hp</span> -= <span class="code-number">20</span>  <span class="code-comment"># 2íƒ€</span><br>
<span class="code-keyword">enemy_hp</span> -= <span class="code-number">20</span>  <span class="code-comment"># 3íƒ€</span><br>
<span class="code-keyword">print</span>(<span class="code-keyword">enemy_hp</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            -= ì—°ì‚°ìë¥¼ 3ë²ˆ ì‚¬ìš©í–ˆì–´ìš”!
                        </div>
                    </div>
                `,
                question: 'ì ì˜ ë‚¨ì€ ì²´ë ¥ì€?',
                choices: ['100', '80', '60', '40'],
                correctAnswer: 3,
                explanation: 'ì •ë‹µ! 100 - 20 - 20 - 20 = 40ì…ë‹ˆë‹¤! ğŸ¹'
            },
            
            // ìŠ¤í…Œì´ì§€ 20: ì¢…í•© ë¬¸ì œ 1
            {
                type: 'quiz',
                title: 'ğŸ¯ ì¢…í•© ì‹œí—˜ 1',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ“œ</div>
                        <div style="font-size: 30px; margin: 20px 0;">ë§ˆë²•ì‚¬ì˜ ì‹œí—˜</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ë³µì¡í•œ ê³„ì‚°ì„ í•´ë´…ì‹œë‹¤!<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">hp</span> = <span class="code-number">100</span><br>
<span class="code-keyword">hp</span> -= <span class="code-number">30</span>  <span class="code-comment"># ë°ë¯¸ì§€ ë°›ìŒ</span><br>
<span class="code-keyword">potion</span> = <span class="code-number">25</span><br>
<span class="code-keyword">hp</span> += <span class="code-keyword">potion</span>  <span class="code-comment"># ë¬¼ì•½ ì‚¬ìš©</span><br>
<span class="code-keyword">print</span>(<span class="code-keyword">hp</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            ì²œì²œíˆ ë‹¨ê³„ë³„ë¡œ ê³„ì‚°í•´ë³´ì„¸ìš”!<br>
                            1. hp = 100ì—ì„œ ì‹œì‘<br>
                            2. hp -= 30 ì‹¤í–‰<br>
                            3. hp += 25 ì‹¤í–‰<br>
                            4. ìµœì¢… ê²°ê³¼ëŠ”?
                        </div>
                    </div>
                `,
                question: 'ìµœì¢… hp ê°’ì€?',
                choices: ['100', '70', '95', '125'],
                correctAnswer: 2,
                explanation: 'ì •ë‹µ! 100 - 30 + 25 = 95ì…ë‹ˆë‹¤. ì™„ë²½í•´ìš”! ğŸ‰'
            },
            
            // ìŠ¤í…Œì´ì§€ 21: input() ë§ˆë‚˜ ë¬¼ì•½
            {
                type: 'input',
                title: 'ğŸ’™ ë§ˆë‚˜ ë¬¼ì•½ êµ¬ë§¤',
                scene: `
                    <div class="shop-scene">
                        <div class="pixel-shop">ğŸª</div>
                        <div class="item-display">
                            <div class="item-card">
                                <div class="item-icon">ğŸ’™</div>
                                <div class="item-name">ë§ˆë‚˜ ë¬¼ì•½</div>
                                <div class="item-price">30 ê³¨ë“œ</div>
                            </div>
                        </div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ë§ˆë²•ì‚¬ì—ê²Œ í•„ìš”í•œ ë§ˆë‚˜ ë¬¼ì•½ì„ êµ¬ë§¤í•©ë‹ˆë‹¤!<br>
                        ë§ˆë‚˜ ë¬¼ì•½ì€ 30 ê³¨ë“œì…ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">potion_price</span> = <span class="code-number">30</span><br>
<span class="code-keyword">count</span> = <span class="code-keyword">input</span>(<span class="code-string">"ëª‡ ê°œ? "</span>)<br>
<span class="code-keyword">count</span> = <span class="code-keyword">int</span>(<span class="code-keyword">count</span>)<br>
<span class="code-keyword">total</span> = <span class="code-keyword">potion_price</span> * <span class="code-keyword">count</span>
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            ì…ë ¥ë°›ì€ ë¬¸ìë¥¼ int()ë¡œ ìˆ«ìë¡œ ë³€í™˜!
                        </div>
                    </div>
                `,
                question: 'ë§ˆë‚˜ ë¬¼ì•½ì„ ëª‡ ê°œ êµ¬ë§¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
                inputPlaceholder: 'ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš” (1-10)',
                correctAnswer: null,
                onAnswer: (answer) => {
                    const num = parseInt(answer);
                    if (isNaN(num) || num < 1 || num > 10) {
                        return { correct: false, message: '1ë¶€í„° 10 ì‚¬ì´ì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!' };
                    }
                    const total = 30 * num;
                    gold -= total;
                    inventory.push(`ğŸ’™ ë§ˆë‚˜ ë¬¼ì•½ Ã— ${num}`);
                    updateStats();
                    return { 
                        correct: true, 
                        message: `ë§ˆë‚˜ ë¬¼ì•½ ${num}ê°œ êµ¬ë§¤! ì´ ${total} ê³¨ë“œ ì§€ë¶ˆ ğŸ’°<br>Python: 30 Ã— ${num} = ${total}`,
                        points: 100
                    };
                }
            },
            
            // ìŠ¤í…Œì´ì§€ 22: ê²½í—˜ì¹˜ ê³„ì‚°
            {
                type: 'quiz',
                title: 'â­ ë ˆë²¨ì—… ê²½í—˜ì¹˜',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">â­</div>
                        <div style="font-size: 30px; margin: 20px 0;">ë ˆë²¨ì—…ê¹Œì§€?</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ë ˆë²¨ì—…ì— í•„ìš”í•œ ê²½í—˜ì¹˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.<br>
                        í˜„ì¬ 500 ê²½í—˜ì¹˜, í•„ìš” ê²½í—˜ì¹˜ 1000ì…ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">current_exp</span> = <span class="code-number">500</span><br>
<span class="code-keyword">required_exp</span> = <span class="code-number">1000</span><br>
<span class="code-keyword">need_more</span> = <span class="code-keyword">required_exp</span> - <span class="code-keyword">current_exp</span><br>
<span class="code-keyword">print</span>(<span class="code-keyword">need_more</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            í•„ìš”í•œ ë§Œí¼ í˜„ì¬ë¥¼ ë¹¼ë©´ ë¶€ì¡±í•œ ì–‘!
                        </div>
                    </div>
                `,
                question: 'ë ˆë²¨ì—…ê¹Œì§€ í•„ìš”í•œ ê²½í—˜ì¹˜ëŠ”?',
                choices: ['1000', '500', '1500', '250'],
                correctAnswer: 1,
                explanation: 'ì •ë‹µ! 1000 - 500 = 500 ê²½í—˜ì¹˜ê°€ ë” í•„ìš”í•©ë‹ˆë‹¤! â­'
            },
            
            // ìŠ¤í…Œì´ì§€ 23: ìŠ¤í‚¬ ì¿¨íƒ€ì„
            {
                type: 'quiz',
                title: 'â° ìŠ¤í‚¬ ì¿¨íƒ€ì„',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">âš¡</div>
                        <div style="font-size: 30px; margin: 20px 0;">ìŠ¤í‚¬ ì¤€ë¹„ ì¤‘...</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ê°•ë ¥í•œ ìŠ¤í‚¬ì˜ ì¿¨íƒ€ì„ì´ 10ì´ˆì…ë‹ˆë‹¤.<br>
                        í˜„ì¬ 3ì´ˆê°€ ì§€ë‚¬ìŠµë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">cooltime</span> = <span class="code-number">10</span><br>
<span class="code-keyword">passed</span> = <span class="code-number">3</span><br>
<span class="code-keyword">remaining</span> = <span class="code-keyword">cooltime</span> - <span class="code-keyword">passed</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"ë‚¨ì€ ì‹œê°„:"</span>, <span class="code-keyword">remaining</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            ì „ì²´ ì‹œê°„ì—ì„œ ì§€ë‚œ ì‹œê°„ì„ ë¹¼ìš”!
                        </div>
                    </div>
                `,
                question: 'ìŠ¤í‚¬ ì‚¬ìš©ê¹Œì§€ ë‚¨ì€ ì‹œê°„ì€?',
                choices: ['10', '3', '7', '13'],
                correctAnswer: 2,
                explanation: 'ì •ë‹µ! 10 - 3 = 7ì´ˆ ë‚¨ì•˜ìŠµë‹ˆë‹¤! â°'
            },
            
            // ìŠ¤í…Œì´ì§€ 24: íŒ€ ë°ë¯¸ì§€ í•©ì‚°
            {
                type: 'quiz',
                title: 'ğŸ‘¥ íŒŒí‹° ì´ ë°ë¯¸ì§€',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 50px;">âš”ï¸ ğŸ¹ ğŸ”®</div>
                        <div style="font-size: 30px; margin: 20px 0;">íŒ€ì›Œí¬!</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        3ëª…ì˜ íŒŒí‹°ì›ì´ í•¨ê»˜ ê³µê²©í•©ë‹ˆë‹¤!<br>
                        ì „ì‚¬ 50, ê¶ìˆ˜ 40, ë§ˆë²•ì‚¬ 60 ë°ë¯¸ì§€!<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">warrior</span> = <span class="code-number">50</span><br>
<span class="code-keyword">archer</span> = <span class="code-number">40</span><br>
<span class="code-keyword">mage</span> = <span class="code-number">60</span><br>
<span class="code-keyword">total_damage</span> = <span class="code-keyword">warrior</span> + <span class="code-keyword">archer</span> + <span class="code-keyword">mage</span><br>
<span class="code-keyword">print</span>(<span class="code-keyword">total_damage</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            ëª¨ë“  ë°ë¯¸ì§€ë¥¼ ë”í•˜ë©´ ì´ ë°ë¯¸ì§€!
                        </div>
                    </div>
                `,
                question: 'íŒŒí‹°ì˜ ì´ ë°ë¯¸ì§€ëŠ”?',
                choices: ['100', '140', '150', '110'],
                correctAnswer: 2,
                explanation: 'ì •ë‹µ! 50 + 40 + 60 = 150 ë°ë¯¸ì§€! íŒ€ì›Œí¬! ğŸ‘¥'
            },
            
            // ìŠ¤í…Œì´ì§€ 25: ì•„ì´í…œ ê°•í™”
            {
                type: 'quiz',
                title: 'âš’ï¸ ë¬´ê¸° ê°•í™”',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">âš’ï¸</div>
                        <div style="font-size: 30px; margin: 20px 0;">+3 ê°•í™”!</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ë¬´ê¸°ë¥¼ ê°•í™”í•˜ë©´ ê³µê²©ë ¥ì´ ì˜¬ë¼ê°‘ë‹ˆë‹¤!<br>
                        ê¸°ë³¸ ê³µê²©ë ¥ 40ì— ê°•í™” ë³´ë„ˆìŠ¤ 15ë¥¼ ë”í•©ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">base_attack</span> = <span class="code-number">40</span><br>
<span class="code-keyword">enhance_bonus</span> = <span class="code-number">15</span><br>
<span class="code-keyword">total_attack</span> = <span class="code-keyword">base_attack</span> + <span class="code-keyword">enhance_bonus</span><br>
<span class="code-keyword">print</span>(<span class="code-keyword">total_attack</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            ê°•í™”ë¡œ ë” ê°•í•´ì§‘ë‹ˆë‹¤!
                        </div>
                    </div>
                `,
                question: 'ê°•í™” í›„ ì´ ê³µê²©ë ¥ì€?',
                choices: ['40', '15', '55', '25'],
                correctAnswer: 2,
                explanation: 'ì •ë‹µ! 40 + 15 = 55 ê³µê²©ë ¥! ê°•í™” ì„±ê³µ! âš’ï¸'
            },
            
            // ìŠ¤í…Œì´ì§€ 26: ì„¸íŠ¸ íš¨ê³¼
            {
                type: 'quiz',
                title: 'âœ¨ ì„¸íŠ¸ ì•„ì´í…œ íš¨ê³¼',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ­</div>
                        <div style="font-size: 30px; margin: 20px 0;">ì„¸íŠ¸ íš¨ê³¼ ë°œë™!</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ì„¸íŠ¸ ì•„ì´í…œì„ ëª¨ë‘ ì°©ìš©í•˜ë©´ ë°©ì–´ë ¥ 2ë°°!<br>
                        ê¸°ë³¸ ë°©ì–´ë ¥ 35ì…ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">defense</span> = <span class="code-number">35</span><br>
<span class="code-keyword">set_bonus</span> = <span class="code-number">2</span><br>
<span class="code-keyword">total_defense</span> = <span class="code-keyword">defense</span> * <span class="code-keyword">set_bonus</span><br>
<span class="code-keyword">print</span>(<span class="code-keyword">total_defense</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            ì„¸íŠ¸ íš¨ê³¼ëŠ” ê³±ì…ˆìœ¼ë¡œ ê³„ì‚°!
                        </div>
                    </div>
                `,
                question: 'ì„¸íŠ¸ íš¨ê³¼ í›„ ì´ ë°©ì–´ë ¥ì€?',
                choices: ['35', '37', '70', '17'],
                correctAnswer: 2,
                explanation: 'ì •ë‹µ! 35 Ã— 2 = 70 ë°©ì–´ë ¥! ì„¸íŠ¸ íš¨ê³¼! âœ¨'
            },
            
            // ìŠ¤í…Œì´ì§€ 27: ìƒíƒœ í™•ì¸
            {
                type: 'quiz',
                title: 'ğŸ” ì²´ë ¥ ìƒíƒœ í™•ì¸',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">â¤ï¸</div>
                        <div style="font-size: 30px; margin: 20px 0;">ì•ˆì „í•œê°€?</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ì²´ë ¥ì´ 80 ì´ìƒì´ë©´ ì•ˆì „í•œ ìƒíƒœì…ë‹ˆë‹¤.<br>
                        í˜„ì¬ ì²´ë ¥ì€ 95ì…ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">hp</span> = <span class="code-number">95</span><br>
<span class="code-keyword">is_safe</span> = <span class="code-keyword">hp</span> >= <span class="code-number">80</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"ì•ˆì „:"</span>, <span class="code-keyword">is_safe</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            >= ëŠ” "í¬ê±°ë‚˜ ê°™ë‹¤"ë¥¼ í™•ì¸!
                        </div>
                    </div>
                `,
                question: 'is_safeì˜ ê°’ì€?',
                choices: ['True', 'False', '95', '80'],
                correctAnswer: 0,
                explanation: 'ì •ë‹µ! 95 >= 80ì€ Trueì…ë‹ˆë‹¤. ì•ˆì „! â¤ï¸'
            },
            
            // ìŠ¤í…Œì´ì§€ 28: ë§ˆë‚˜ ë¶€ì¡±
            {
                type: 'quiz',
                title: 'ğŸ’™ ë§ˆë‚˜ ë¶€ì¡± ì²´í¬',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ’™</div>
                        <div style="font-size: 30px; margin: 20px 0; color: #88ccff;">ë§ˆë‚˜ê°€...</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ìŠ¤í‚¬ì„ ì“°ë ¤ë©´ ë§ˆë‚˜ê°€ 50 ì´ìƒ í•„ìš”í•©ë‹ˆë‹¤.<br>
                        í˜„ì¬ ë§ˆë‚˜ëŠ” 30ì…ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">mana</span> = <span class="code-number">30</span><br>
<span class="code-keyword">can_cast</span> = <span class="code-keyword">mana</span> >= <span class="code-number">50</span><br>
<span class="code-keyword">print</span>(<span class="code-string">"ìŠ¤í‚¬ ì‚¬ìš©:"</span>, <span class="code-keyword">can_cast</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            30ì€ 50ë³´ë‹¤ ì‘ìœ¼ë¯€ë¡œ...
                        </div>
                    </div>
                `,
                question: 'can_castì˜ ê°’ì€?',
                choices: ['True', 'False', '30', '50'],
                correctAnswer: 1,
                explanation: 'ì •ë‹µ! 30 >= 50ì€ Falseì…ë‹ˆë‹¤. ë§ˆë‚˜ ë¶€ì¡±! ğŸ’™'
            },
            
            // ìŠ¤í…Œì´ì§€ 29: ë³´ìŠ¤ì „ ì¤€ë¹„
            {
                type: 'quiz',
                title: 'ğŸ‘‘ ë³´ìŠ¤ ë„ì „ ìê²©',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ‘‘</div>
                        <div style="font-size: 30px; margin: 20px 0;">ë³´ìŠ¤ì „ ì…ì¥</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ë³´ìŠ¤ì— ë„ì „í•˜ë ¤ë©´ ë ˆë²¨ì´ 25ë³´ë‹¤ ë†’ì•„ì•¼ í•©ë‹ˆë‹¤.<br>
                        ${playerName}ë‹˜ì˜ ë ˆë²¨ì€ 30ì…ë‹ˆë‹¤.<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">level</span> = <span class="code-number">30</span><br>
<span class="code-keyword">min_level</span> = <span class="code-number">25</span><br>
<span class="code-keyword">can_challenge</span> = <span class="code-keyword">level</span> > <span class="code-keyword">min_level</span><br>
<span class="code-keyword">print</span>(<span class="code-keyword">can_challenge</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            > ëŠ” "ë³´ë‹¤ í¬ë‹¤"ë¥¼ í™•ì¸!
                        </div>
                    </div>
                `,
                question: 'can_challengeì˜ ê°’ì€?',
                choices: ['True', 'False', '30', '25'],
                correctAnswer: 0,
                explanation: 'ì •ë‹µ! 30 > 25ëŠ” Trueì…ë‹ˆë‹¤. ë³´ìŠ¤ ë„ì „ ê°€ëŠ¥! ğŸ‘‘'
            },
            
            // ìŠ¤í…Œì´ì§€ 30: ì—°ì† ë²„í”„
            {
                type: 'quiz',
                title: 'âœ¨ ì—°ì† ë²„í”„ íš¨ê³¼',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">âœ¨ğŸ”®âœ¨</div>
                        <div style="font-size: 30px; margin: 20px 0;">ë²„í”„ ì¤‘ì²©!</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ê³µê²©ë ¥ì— ë‘ ê°€ì§€ ë²„í”„ë¥¼ ë°›ìŠµë‹ˆë‹¤!<br>
                        ê¸°ë³¸ ê³µê²©ë ¥ 30ì— +20, ê·¸ë¦¬ê³  +15!<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">attack</span> = <span class="code-number">30</span><br>
<span class="code-keyword">attack</span> += <span class="code-number">20</span>  <span class="code-comment"># ì²« ë²ˆì§¸ ë²„í”„</span><br>
<span class="code-keyword">attack</span> += <span class="code-number">15</span>  <span class="code-comment"># ë‘ ë²ˆì§¸ ë²„í”„</span><br>
<span class="code-keyword">print</span>(<span class="code-keyword">attack</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            += ì—°ì‚°ìë¥¼ 2ë²ˆ ì‚¬ìš©!
                        </div>
                    </div>
                `,
                question: 'ìµœì¢… ê³µê²©ë ¥ì€?',
                choices: ['30', '50', '65', '45'],
                correctAnswer: 2,
                explanation: 'ì •ë‹µ! 30 + 20 + 15 = 65 ê³µê²©ë ¥! ë²„í”„ ì¤‘ì²©! âœ¨'
            },
            
            // ìŠ¤í…Œì´ì§€ 31: ìµœì¢… ì¢…í•© ë¬¸ì œ
            {
                type: 'quiz',
                title: 'ğŸ“ ìµœì¢… ë§ˆìŠ¤í„° ì‹œí—˜',
                scene: `
                    <div class="shop-scene">
                        <div style="font-size: 60px;">ğŸ“</div>
                        <div style="font-size: 30px; margin: 20px 0;">ë§ˆìŠ¤í„° ë“±ê¸‰ ë„ì „!</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ëª¨ë“  ê±¸ í™œìš©í•œ ë³µì¡í•œ ê³„ì‚°ì…ë‹ˆë‹¤!<br><br>
                        
                        <div class="code-display">
<span class="code-keyword">gold</span> = <span class="code-number">500</span><br>
<span class="code-keyword">gold</span> += <span class="code-number">100</span>  <span class="code-comment"># í€˜ìŠ¤íŠ¸ ë³´ìƒ</span><br>
<span class="code-keyword">gold</span> -= <span class="code-number">150</span>  <span class="code-comment"># ë¬¼ì•½ êµ¬ë§¤</span><br>
<span class="code-keyword">gold</span> *= <span class="code-number">2</span>  <span class="code-comment"># ëŸ­í‚¤ ì´ë²¤íŠ¸!</span><br>
<span class="code-keyword">print</span>(<span class="code-keyword">gold</span>)
                        </div>
                        
                        <div class="hint-box">
                            <span class="hint-icon">ğŸ’¡</span>
                            ìˆœì„œëŒ€ë¡œ ì²œì²œíˆ!<br>
                            1. 500 + 100 = ?<br>
                            2. ê·¸ ê²°ê³¼ - 150 = ?<br>
                            3. ê·¸ ê²°ê³¼ Ã— 2 = ?
                        </div>
                    </div>
                `,
                question: 'ìµœì¢… ê³¨ë“œëŠ”?',
                choices: ['450', '900', '1200', '600'],
                correctAnswer: 1,
                explanation: 'ì •ë‹µ! (500+100-150)Ã—2 = 450Ã—2 = 900 ê³¨ë“œ! ë§ˆìŠ¤í„°! ğŸ“'
            },
            
            // ìŠ¤í…Œì´ì§€ 32: ì™„ë£Œ
            {
                type: 'complete',
                title: 'ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤!',
                scene: `
                    <div class="celebration">
                        <div class="trophy">ğŸ†</div>
                        <div class="final-score">CLEAR!</div>
                        <div style="font-size: 40px; margin: 20px 0;">ğŸŠ âœ¨ ğŸ‰</div>
                    </div>
                `,
                description: `
                    <div class="game-text">
                        ${playerName}ë‹˜, ëª¨ë“  ê³¼ì •ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!<br><br>
                        
                        <div style="background: rgba(255, 215, 0, 0.1); border: 2px solid #ffd700; border-radius: 8px; padding: 20px; margin: 20px 0;">
                            <strong style="color: #ffd700; font-size: 15px;">ğŸ“ ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš©:</strong><br><br>
                            
                            <div style="text-align: left; font-size: 13px; line-height: 2;">
                                âœ… <strong>ì‚°ìˆ  ì—°ì‚°ì:</strong> +, -, *, /<br>
                                âœ… <strong>ë³µí•© ì—°ì‚°ì:</strong> +=, -=, *=<br>
                                âœ… <strong>ë¹„êµ ì—°ì‚°ì:</strong> >, <, ==, >=, <=<br>
                                âœ… <strong>input():</strong> í”Œë ˆì´ì–´ ì…ë ¥ ë°›ê¸°<br>
                                âœ… <strong>int():</strong> ë¬¸ìë¥¼ ìˆ«ìë¡œ ë³€í™˜<br>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px; font-size: 13px; color: #88ccff;">
                            ì´ì œ ì—¬ëŸ¬ë¶„ì€ Pythonìœ¼ë¡œ ê³„ì‚°í•˜ê³ <br>
                            í”Œë ˆì´ì–´ì™€ ì†Œí†µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸš€<br><br>
                            
                            <strong style="color: #ffd700;">íšë“í•œ ì•„ì´í…œ:</strong><br>
                            ${inventory.join('<br>')}
                        </div>
                    </div>
                `
            }
        ];

        // ì´ˆê¸°í™”
        function init() {
            // ì²« ìŠ¤í…Œì´ì§€(ì´ë¦„ ì…ë ¥)ì™€ ë§ˆì§€ë§‰ ìŠ¤í…Œì´ì§€(ì™„ë£Œ)ë¥¼ ì œì™¸í•œ ëª¨ë“  ë¬¸ì œë¥¼ í’€ì— ì¶”ê°€
            for (let i = 1; i < stages.length - 1; i++) {
                remainingStages.push(i);
            }
            totalQuestions = remainingStages.length;
            updateStats();
            renderStage();
            
            // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.addEventListener('keydown', handleKeyPress);
        }
        
        // í‚¤ë³´ë“œ ì…ë ¥ ì²˜ë¦¬
        function handleKeyPress(event) {
            // ìˆ«ìí‚¤ 1, 2, 3, 4 ì²˜ë¦¬
            if (event.key >= '1' && event.key <= '4') {
                const index = parseInt(event.key) - 1;
                const buttons = document.querySelectorAll('.choice-button');
                
                // ì„ íƒì§€ê°€ ìˆê³ , í•´ë‹¹ ì¸ë±ìŠ¤ì˜ ë²„íŠ¼ì´ ì¡´ì¬í•˜ë©°, í´ë¦­ ê°€ëŠ¥í•œ ìƒíƒœì¸ì§€ í™•ì¸
                if (buttons.length > index && buttons[index]) {
                    const button = buttons[index];
                    // ë²„íŠ¼ì´ ë¹„í™œì„±í™”ë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸
                    if (button.style.pointerEvents !== 'none') {
                        buttons[index].click();
                    }
                }
            }
        }
        
        // ëœë¤ ìŠ¤í…Œì´ì§€ ì„ íƒ
        function getRandomStage() {
            if (remainingStages.length === 0) {
                // ëª¨ë“  ë¬¸ì œë¥¼ í’€ì—ˆìœ¼ë©´ ì™„ë£Œ í™”ë©´
                return stages.length - 1;
            }
            const randomIndex = Math.floor(Math.random() * remainingStages.length);
            const stageIndex = remainingStages[randomIndex];
            remainingStages.splice(randomIndex, 1);
            usedStages.push(stageIndex);
            return stageIndex;
        }

        // ìŠ¤í…Œì´ì§€ ë Œë”ë§
        function renderStage() {
            const stage = stages[currentStage];
            const gameScreen = document.getElementById('gameScreen');
            
            let html = `
                <h2 style="color: #ffd700; font-size: 17px; text-align: center; margin-bottom: 20px;">
                    ${stage.title}
                </h2>
                ${stage.scene}
                ${stage.description}
            `;
            
            if (stage.type === 'quiz') {
                html += `
                    <div class="question-box">
                        <div class="question-title">${stage.question}</div>
                        <div class="choice-grid">
                            ${stage.choices.map((choice, index) => `
                                <button class="choice-button" onclick="checkAnswer(${index})">
                                    <span style="color: #ffd700; font-weight: bold;">[${index + 1}]</span> ${choice}
                                </button>
                            `).join('')}
                        </div>
                        <div style="text-align: center; margin-top: 15px; font-size: 12px; color: #88ccff;">
                            ğŸ’¡ ìˆ«ìí‚¤ 1-4ë¡œ ë¹ ë¥´ê²Œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
                        </div>
                    </div>
                `;
            } else if (stage.type === 'input') {
                html += `
                    <div class="question-box">
                        <div class="question-title">${stage.question}</div>
                        <div class="input-container">
                            <input type="text" id="userInput" class="game-input" 
                                   placeholder="${stage.inputPlaceholder}"
                                   onkeypress="if(event.key==='Enter') submitInput()">
                        </div>
                        <div class="button-group">
                            <button class="game-button primary" onclick="submitInput()">
                                ì œì¶œí•˜ê¸° âœ…
                            </button>
                        </div>
                    </div>
                `;
            } else if (stage.type === 'complete') {
                html += `
                    <div class="button-group">
                        <button class="game-button success" onclick="restartGame()">
                            ë‹¤ì‹œ ë„ì „í•˜ê¸° ğŸ”„
                        </button>
                    </div>
                `;
            }
            
            gameScreen.innerHTML = html;
            
            // input í•„ë“œì— í¬ì»¤ìŠ¤
            if (stage.type === 'input') {
                setTimeout(() => {
                    document.getElementById('userInput')?.focus();
                }, 100);
            }
            
            updateProgress();
        }

        // í€´ì¦ˆ ë‹µë³€ í™•ì¸
        function checkAnswer(selectedIndex) {
            const stage = stages[currentStage];
            const buttons = document.querySelectorAll('.choice-button');
            
            // ì•¡ì…˜ ì½”ë“œ í‘œì‹œ
            showActionCode(`<span style="color: #ff44ff;">selected_answer</span> = <span style="color: #44ffff;">${selectedIndex + 1}</span>  <span style="color: #888;"># ì„ íƒí•œ ë‹µ</span>`);
            
            if (selectedIndex === stage.correctAnswer) {
                // ì •ë‹µ!
                buttons.forEach(btn => btn.style.pointerEvents = 'none');
                buttons[selectedIndex].style.borderColor = '#44ff44';
                buttons[selectedIndex].style.background = 'linear-gradient(135deg, #1a4a2a 0%, #0a2a1a 100%)';
                buttons[selectedIndex].classList.add('selected');
                
                // ì„±ê³µ ì„í™íŠ¸ íš¨ê³¼
                showSuccessImpact();
                
                // ì •ë‹µ ì½”ë“œ ì¶”ê°€
                setTimeout(() => {
                    showActionCode(`<span style="color: #ff44ff;">if</span> selected_answer == correct_answer:<br>    <span style="color: #ff44ff;">score</span> += <span style="color: #44ffff;">100</span><br>    <span style="color: #ff44ff;">gold</span> += <span style="color: #44ffff;">50</span>  <span style="color: #888;"># ì •ë‹µ!</span>`);
                }, 300);
                
                // ì •ë‹µ ê°œìˆ˜ ì¦ê°€ ë° ë‚œì´ë„ ì²´í¬
                correctAnswers++;
                const scoreReward = 100 * difficultyMultiplier;
                const goldReward = 50 * difficultyMultiplier;
                
                showFeedback('correct', stage.explanation);
                score += scoreReward;
                gold += goldReward;
                updateStats();
                
                // 7ë¬¸ì œë§ˆë‹¤ ë‚œì´ë„ ìƒìŠ¹
                if (correctAnswers % 7 === 0) {
                    difficultyMultiplier *= 2;
                    setTimeout(() => {
                        showFeedback('info', `ğŸŠ ë‚œì´ë„ ìƒìŠ¹! ${correctAnswers}ë¬¸ì œ ëŒíŒŒ!<br>âš¡ ë³´ìƒ & í˜ë„í‹° ${difficultyMultiplier}ë°°! âš¡`);
                    }, 1500);
                }
                
                setTimeout(() => {
                    nextStage();
                }, 3000);
            } else {
                // ì˜¤ë‹µ - í‹€ë¦° ë²„íŠ¼ë§Œ í‘œì‹œí•˜ê³  ë‹¤ì‹œ ì„ íƒ ê°€ëŠ¥
                buttons[selectedIndex].classList.add('wrong');
                buttons[selectedIndex].style.borderColor = '#ff4444';
                buttons[selectedIndex].style.background = 'linear-gradient(135deg, #4a1a1a 0%, #2a0a0a 100%)';
                buttons[selectedIndex].style.pointerEvents = 'none'; // í‹€ë¦° ë²„íŠ¼ë§Œ ë¹„í™œì„±í™”
                
                // HP ê°ì†Œ (ë‚œì´ë„ì— ë”°ë¼ ì¦ê°€)
                const hpPenalty = 25 * difficultyMultiplier;
                hp -= hpPenalty;
                if (hp < 0) hp = 0;
                updateStats();
                
                // ì˜¤ë‹µ ì½”ë“œ í‘œì‹œ
                setTimeout(() => {
                    showActionCode(`<span style="color: #ff44ff;">if</span> selected_answer != correct_answer:<br>    <span style="color: #ff44ff;">hp</span> -= <span style="color: #44ffff;">${hpPenalty}</span>  <span style="color: #888;"># ì˜¤ë‹µ í˜ë„í‹° (x${difficultyMultiplier})</span>`);
                }, 300);
                
                // ì‹¤íŒ¨ ì„í™íŠ¸ íš¨ê³¼
                showFailImpact();
                
                // HPê°€ 0ì´ ë˜ë©´ ê²Œì„ ì˜¤ë²„
                if (hp <= 0) {
                    buttons.forEach(btn => btn.style.pointerEvents = 'none');
                    showFeedback('incorrect', 'ğŸ’€ HPê°€ 0ì´ ë˜ì—ˆìŠµë‹ˆë‹¤! ê²Œì„ ì˜¤ë²„! ğŸ˜­<br><br>ì¬ì‹œì‘í•˜ì—¬ ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”!');
                    setTimeout(() => {
                        showGameOver();
                    }, 2000);
                } else {
                    // ì˜¤ë‹µ ì´ìœ  ì„¤ëª… í‘œì‹œ
                    const wrongReason = getWrongReason(selectedIndex, stage);
                    const hpPenalty = 25 * difficultyMultiplier;
                    showFeedback('incorrect', wrongReason + '<br><br>ğŸ’” HP -' + hpPenalty + ' (ë‚¨ì€ HP: ' + hp + ')<br>ğŸ’¡ ë‹¤ì‹œ í•œ ë²ˆ ìƒê°í•´ë³´ê³  ë‹¤ë¥¸ ë‹µì„ ì„ íƒí•´ë³´ì„¸ìš”!');
                }
                
                // ë‹¤ë¥¸ ë²„íŠ¼ë“¤ì€ ê³„ì† ì„ íƒ ê°€ëŠ¥í•˜ë„ë¡ ìœ ì§€ (HPê°€ 0ì´ ì•„ë‹ ë•Œë§Œ)
            }
        }
        
        // ì„±ê³µ ì„í™íŠ¸ í‘œì‹œ
        function showSuccessImpact() {
            const confettiCount = 40;
            const emojis = ['âœ¨', 'â­', 'ğŸ’«', 'ğŸŒŸ', 'ğŸ’–', 'ğŸ’›', 'ğŸ’š', 'ğŸ’™', 'ğŸ‰', 'ğŸŠ'];
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'success-impact';
                confetti.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-20px';
                const duration = 2 + Math.random() * 2;
                confetti.style.animationDuration = duration + 's';
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), (duration + 0.5) * 1000);
            }
            
            // ë°°ê²½ í”Œë˜ì‹œ íš¨ê³¼
            const flash = document.createElement('div');
            flash.style.position = 'fixed';
            flash.style.top = '0';
            flash.style.left = '0';
            flash.style.width = '100%';
            flash.style.height = '100%';
            flash.style.background = 'radial-gradient(circle, rgba(255,215,0,0.3) 0%, rgba(56,239,125,0.2) 50%, transparent 100%)';
            flash.style.zIndex = '999';
            flash.style.pointerEvents = 'none';
            flash.style.animation = 'flashSuccess 1.2s ease-out forwards';
            document.body.appendChild(flash);
            
            setTimeout(() => {
                impact.remove();
                flash.remove();
            }, 1200);
        }
        
        // ì‹¤íŒ¨ ì„í™íŠ¸ í‘œì‹œ
        function showFailImpact() {
            const impact = document.createElement('div');
            impact.className = 'fail-impact';
            impact.innerHTML = 'âŒğŸ’¥ğŸ’¢âš¡';
            document.body.appendChild(impact);
            
            // ë°°ê²½ í”ë“¤ë¦¼ íš¨ê³¼
            document.body.style.animation = 'shake 0.5s';
            
            // ë¶‰ì€ í”Œë˜ì‹œ íš¨ê³¼
            const flash = document.createElement('div');
            flash.style.position = 'fixed';
            flash.style.top = '0';
            flash.style.left = '0';
            flash.style.width = '100%';
            flash.style.height = '100%';
            flash.style.background = 'radial-gradient(circle, rgba(255,68,68,0.4) 0%, transparent 70%)';
            flash.style.zIndex = '999';
            flash.style.pointerEvents = 'none';
            flash.style.animation = 'flashFail 1s ease-out forwards';
            document.body.appendChild(flash);
            
            setTimeout(() => {
                impact.remove();
                flash.remove();
                document.body.style.animation = '';
            }, 1000);
        }
        
        // ì˜¤ë‹µ ì´ìœ  ì„¤ëª…
        function getWrongReason(selectedIndex, stage) {
            const selectedChoice = stage.choices[selectedIndex];
            return `âŒ "${selectedChoice}"ì€(ëŠ”) í‹€ë ¸ìŠµë‹ˆë‹¤!`;
        }

        // ì…ë ¥ ì œì¶œ
        function submitInput() {
            const input = document.getElementById('userInput');
            const answer = input.value.trim();
            
            if (!answer) {
                showFailImpact();
                showFeedback('incorrect', 'ë‹µì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const stage = stages[currentStage];
            const result = stage.onAnswer(answer);
            
            if (result.correct) {
                showSuccessImpact();
                showFeedback('correct', result.message);
                score += result.points || 100;
                updateStats();
                input.disabled = true;
                
                setTimeout(() => {
                    nextStage();
                }, 3000);
            } else {
                showFailImpact();
                showFeedback('incorrect', result.message);
                input.value = '';
                input.focus();
            }
        }

        // í”¼ë“œë°± í‘œì‹œ
        function showFeedback(type, message) {
            const existingFeedback = document.querySelector('.feedback');
            if (existingFeedback) {
                existingFeedback.remove();
            }
            
            const feedback = document.createElement('div');
            feedback.className = `feedback ${type}`;
            feedback.innerHTML = message;
            
            const questionBox = document.querySelector('.question-box');
            if (questionBox) {
                questionBox.appendChild(feedback);
            }
        }

        // ë‹¤ìŒ ìŠ¤í…Œì´ì§€
        function nextStage() {
            if (currentStage === 0) {
                // ì²« ë²ˆì§¸(ì´ë¦„ ì…ë ¥) í›„ì—ëŠ” ëœë¤ ë¬¸ì œ ì‹œì‘
                currentStage = getRandomStage();
            } else if (remainingStages.length === 0) {
                // ëª¨ë“  ë¬¸ì œë¥¼ í’€ì—ˆìœ¼ë©´ ì™„ë£Œ í™”ë©´ìœ¼ë¡œ
                currentStage = stages.length - 1;
            } else {
                // ë‹¤ìŒ ëœë¤ ë¬¸ì œ ì„ íƒ
                currentStage = getRandomStage();
            }
            
            // ë ˆë²¨ì—… ì²´í¬
            const questionsCompleted = usedStages.length;
            if (questionsCompleted >= 10 && level === 1) {
                level = 2;
            } else if (questionsCompleted >= 20 && level === 2) {
                level = 3;
            } else if (questionsCompleted >= 30 && level === 3) {
                level = 4;
            }
            
            updateStats();
            renderStage();
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            document.getElementById('scoreDisplay').textContent = score;
            document.getElementById('goldDisplay').textContent = gold;
            document.getElementById('levelDisplay').textContent = level;
            
            // HP ë°” ì—…ë°ì´íŠ¸
            const hpBar = document.getElementById('hpBar');
            const hpText = document.getElementById('hpText');
            const hpPercent = (hp / maxHp) * 100;
            
            hpBar.style.width = hpPercent + '%';
            hpText.textContent = hp + ' / ' + maxHp;
            
            // HPì— ë”°ë¥¸ ìƒ‰ìƒ ë³€ê²½
            hpBar.className = 'hp-bar-fill';
            if (hpPercent <= 25) {
                hpBar.classList.add('critical');
            } else if (hpPercent <= 50) {
                hpBar.classList.add('low');
            }
        }

        // ì§„í–‰ë„ ì—…ë°ì´íŠ¸
        function updateProgress() {
            const completed = usedStages.length;
            const progress = (completed / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${completed} / ${totalQuestions}`;
        }
        
        // ì²´ë ¥ í¬ì…˜ êµ¬ë§¤
        function buyPotion() {
            const potionPrice = 300;
            
            if (gold < potionPrice) {
                alert('ğŸ’° ê³¨ë“œê°€ ë¶€ì¡±í•©ë‹ˆë‹¤! (í•„ìš”: ' + potionPrice + ' ê³¨ë“œ)');
                showActionCode(`<span style="color: #ff44ff;">if</span> gold < <span style="color: #44ffff;">300</span>:<br>    <span style="color: #ff44ff;">print</span>(<span style="color: #ffff44;">"ê³¨ë“œ ë¶€ì¡±!"</span>)  <span style="color: #888;"># êµ¬ë§¤ ë¶ˆê°€</span>`);
                return;
            }
            
            if (hp >= maxHp) {
                alert('â¤ï¸ ì²´ë ¥ì´ ì´ë¯¸ ê°€ë“ ì°¨ ìˆìŠµë‹ˆë‹¤!');
                showActionCode(`<span style="color: #ff44ff;">if</span> hp >= max_hp:<br>    <span style="color: #ff44ff;">print</span>(<span style="color: #ffff44;">"ì²´ë ¥ ê°€ë“ì°¸!"</span>)  <span style="color: #888;"># êµ¬ë§¤ ë¶ˆí•„ìš”</span>`);
                return;
            }
            
            // ì•¡ì…˜ ì½”ë“œ í‘œì‹œ
            showActionCode(`<span style="color: #888;"># í¬ì…˜ êµ¬ë§¤</span><br><span style="color: #ff44ff;">gold</span> -= <span style="color: #44ffff;">300</span><br><span style="color: #ff44ff;">hp</span> += <span style="color: #44ffff;">25</span><br><span style="color: #ff44ff;">print</span>(<span style="color: #ffff44;">"í¬ì…˜ êµ¬ë§¤ ì™„ë£Œ!"</span>)`);
            
            // ê³¨ë“œ ì°¨ê°
            gold -= potionPrice;
            
            // ì²´ë ¥ íšŒë³µ (25 íšŒë³µ)
            const healAmount = 25;
            hp = Math.min(hp + healAmount, maxHp);
            
            // í†µê³„ ì—…ë°ì´íŠ¸
            updateStats();
            
            // ì„±ê³µ ë©”ì‹œì§€
            const flash = document.createElement('div');
            flash.style.position = 'fixed';
            flash.style.top = '50%';
            flash.style.left = '50%';
            flash.style.transform = 'translate(-50%, -50%)';
            flash.style.fontSize = '40px';
            flash.style.color = '#44ff44';
            flash.style.zIndex = '1000';
            flash.style.animation = 'slideIn 0.5s ease-out';
            flash.style.fontFamily = 'Press Start 2P';
            flash.style.textAlign = 'center';
            flash.style.pointerEvents = 'none';
            flash.style.textShadow = '0 0 20px rgba(68, 255, 68, 0.8)';
            flash.innerHTML = 'ğŸ§ª<br>+' + healAmount + ' HP!';
            document.body.appendChild(flash);
            
            setTimeout(() => {
                flash.remove();
            }, 1500);
        }

        // ì•¡ì…˜ ì½”ë“œ í‘œì‹œ í•¨ìˆ˜
        function showActionCode(code) {
            const codeDisplay = document.getElementById('actionCodeDisplay');
            if (codeDisplay) {
                codeDisplay.innerHTML = code;
                // ìŠ¤í¬ë¡¤ì„ ì•„ë˜ë¡œ
                codeDisplay.scrollTop = codeDisplay.scrollHeight;
            }
        }

        // ê²Œì„ ì¬ì‹œì‘
        function restartGame() {
            currentStage = 0;
            score = 0;
            gold = 1000;
            level = 1;
            hp = 100;
            playerName = "ìš©ì‚¬";
            inventory = [];
            usedStages = [];
            remainingStages = [];
            correctAnswers = 0;
            difficultyMultiplier = 1;
            
            // ë¬¸ì œ í’€ ë‹¤ì‹œ ìƒì„±
            for (let i = 1; i < stages.length - 1; i++) {
                remainingStages.push(i);
            }
            
            // ì•¡ì…˜ ì½”ë“œ ì´ˆê¸°í™”
            showActionCode(`<span style="color: #888;"># ê²Œì„ ì‹œì‘!</span><br><span style="color: #ff44ff;">hp</span> = <span style="color: #44ffff;">100</span><br><span style="color: #ff44ff;">gold</span> = <span style="color: #44ffff;">1000</span>`);
            
            updateStats();
            renderStage();
        }
        
        // ê²Œì„ ì˜¤ë²„ í™”ë©´
        function showGameOver() {
            const gameScreen = document.getElementById('gameScreen');
            gameScreen.innerHTML = `
                <div class="celebration">
                    <div style="font-size: 80px;">ğŸ’€</div>
                    <div class="final-score" style="color: #ff4444;">GAME OVER</div>
                    <div style="font-size: 40px; margin: 20px 0;">ğŸ˜­</div>
                    
                    <div class="game-text" style="margin: 30px 0;">
                        HPê°€ 0ì´ ë˜ì–´ ê²Œì„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.<br><br>
                        <strong style="color: #ffd700;">ìµœì¢… ì ìˆ˜:</strong> ${score}ì <br>
                        <strong style="color: #ffd700;">íšë“ ê³¨ë“œ:</strong> ${gold} ğŸ’°<br>
                        <strong style="color: #ffd700;">ë„ë‹¬ ë ˆë²¨:</strong> ${level} â­<br><br>
                        
                        ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”! ğŸ’ª
                    </div>
                    
                    <div class="button-group">
                        <button class="game-button success" onclick="restartGame()">
                            ë‹¤ì‹œ ì‹œì‘í•˜ê¸° ğŸ”„
                        </button>
                    </div>
                </div>
            `;
        }

        // ê²Œì„ ì‹œì‘
        init();
    </script>
</body>
</html>